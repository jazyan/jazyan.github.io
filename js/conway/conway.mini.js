var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),BLOCK_SIZE=5;canvas.height=.5*canvas.width;var ROWS=canvas.width/BLOCK_SIZE,COLUMNS=canvas.height/BLOCK_SIZE;function initRandomBinaryArr(a,r){for(var n=new Array(a),t=0;t<a;t++)n[t]=Array(r).fill().map(()=>Math.round(Math.random()));return n}var data=initRandomBinaryArr(ROWS,COLUMNS);function update(a,r,n){for(var t=new Array(r),c=0;c<r;c++)t[c]=Array(n);for(c=0;c<r;c++)for(var e=0;e<n;e++){var i=a[c][e],o=checkAliveNeighbors(a,c,e);t[c][e]=conwayRules(i,o),0==t[c][e]?ctx.fillStyle="rgb(255, 255, 255)":ctx.fillStyle="rgb(0, 0, 0)",ctx.fillRect(c*BLOCK_SIZE,e*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE)}return t}function conwayRules(a,r){return 1==a?r<2?0:r<4?1:0:3==r?1:0}function checkAliveNeighbors(a,r,n){for(var t=[[1,0],[-1,0],[0,1],[0,-1],[1,1],[-1,-1],[1,-1],[-1,1]],c=0,e=0;e<t.length;e++)c_x=r+t[e][0],c_y=n+t[e][1],c_x<0||c_x>=ROWS||c_y<0||c_y>=COLUMNS||(c+=a[c_x][c_y]);return c}function draw(){data=update(data,ROWS,COLUMNS)}setInterval(draw,1e3);